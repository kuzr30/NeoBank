{% extends 'email/base_email.html.twig' %}

{% block title %}{{ tp('credit_application_incomplete.title', {}, 'email_templates') }}{% endblock %}

{% block content %}
    <h2 class="content-title">{{ tp('credit_application_incomplete.greeting', {'name': name}, 'email_templates') }}</h2>
    
    <p class="content-text">
        {{ tp('credit_application_incomplete.intro', {}, 'email_templates') }}
    </p>

    {% if reasons is defined and reasons|length > 0 %}
    <div class="warning-box">
        <h3 style="margin-top: 0; color: #f57c00;">{{ tp('credit_application_incomplete.reasons_title', {}, 'email_templates') }}</h3>
        <ul style="margin: 10px 0 0 0; padding-left: 20px;">
        {% for reason in reasons %}
            <li style="margin: 12px 0; color: #000000;">
                <strong style="color: #000000;">{{ reason.label }}</strong>
                {% if reason.description %}
                    <br><span style="color: #666; font-size: 16px;">{{ reason.description }}</span>
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    </div>
    {% else %}
    <div class="warning-box">
        <h3 style="margin-top: 0; color: #f57c00;">{{ tp('credit_application_incomplete.warning_title', {}, 'email_templates') }}</h3>
        <p style="margin-bottom: 0; color: #000000;">
            {{ tp('credit_application_incomplete.warning', {}, 'email_templates') }}
        </p>
    </div>
    {% endif %}

    <div class="info-box">
        <h3 style="margin-top: 0; color: #1976d2;">{{ tp('credit_application_incomplete.action_title', {}, 'email_templates') }}</h3>
        <p style="margin-bottom: 0; color: #000000;">
            {{ tp('credit_application_incomplete.action_required', {}, 'email_templates') }}
        </p>
    </div>

    {% if customMessage %}
    <div class="info-box" style="background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border-left: 4px solid #1976d2;">
        <h3 style="margin-top: 0; color: #0d47a1;">{{ tp('credit_application_incomplete.custom_message_title', {}, 'email_templates') }}</h3>
        <p style="margin: 0; color: #000000; font-size: 16px;">{{ customMessage }}</p>
    </div>
    {% endif %}

    <!-- Bouton de connexion - Design épuré et centré -->
    <div style="text-align: center; margin: 50px 0; padding: 0 20px;">
        <a href="{{ loginUrl }}" style="display: inline-block; padding: 18px 45px; background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: #ffffff; font-size: 17px; font-weight: 600; text-decoration: none; text-align: center; border-radius: 10px; box-shadow: 0 8px 20px rgba(44, 62, 80, 0.25); min-width: 240px; letter-spacing: 0.3px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
            {{ tp('credit_application_incomplete.login_button', {}, 'email_templates') }}
        </a>
    </div>

    <p class="content-text">
        {{ tp('credit_application_incomplete.closing', {}, 'email_templates') }}
    </p>

    <p class="content-text" style="margin-bottom: 0;">
        {{ tp('credit_application_incomplete.signature', {}, 'email_templates')|raw }}
    </p>
{% endblock %}
